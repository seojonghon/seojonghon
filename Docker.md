# 도커

**컨테이너(Container):**
컨테이너는 독립적으로 실행되는 소프트웨어 패키지입니다. 컨테이너는 운영 체제 수준의 가상화 기술을 사용하여 애플리케이션과 해당 종속성을 격리된 환경에서 실행합니다. 이를 통해 애플리케이션은 호스트 시스템과 분리되어 동작하며, 호스트 시스템에 영향을 주지 않고 일관된 환경에서 실행될 수 있습니다. 컨테이너는 Docker 이미지를 기반으로 생성되며, 필요한 파일 시스템, 라이브러리, 실행 가능한 파일 등 모든 것을 포함합니다.

**이미지(Image):**
Docker 이미지는 컨테이너를 생성하는 데 사용되는 템플릿입니다. 이미지는 응용 프로그램과 그 종속성, 설정 및 실행에 필요한 모든 구성 요소를 포함합니다. 즉, 이미지는 애플리케이션의 코드와 런타임 환경을 패키징하여 이식성과 재현성을 제공합니다. Docker 이미지는 여러 개의 계층(layer)으로 구성되며, 각 계층은 변경 가능하고 읽기 전용입니다. 이 계층 구조를 통해 이미지 간에 공유할 수 있는 공동 부분을 최대화하고 디스크 사용량 및 다운로드 속도를 최적화할 수 있습니다.

**볼륨(Volume):**
Docker 볼륨은 컨테이너 내부나 호스트 시스템 외부에서 데이터를 저장하고 관리하는 방법입니다. 볼륨은 데이터의 지속성(persistence)과 공유 목적으로 사용됩니다. 예를 들어, 데이터베이스 파일 또는 로그 파일과 같은 중요한 데이터를 볼륨에 저장하여 컨테이너가 삭제되거나 재시작될 때도 데이터가 유실되지 않도록 할 수 있습니다. 볼륨은 호스트와 분리된 독립적인 공간으로서 여러 컨테이너 간에도 공유할 수 있으므로 데이터의 안정성과 유연성을 제공합니다.

워드프레스(WordPress):

워드프레스는 웹 사이트 및 블로그를 만들고 관리하기 위한 오픈 소스 콘텐츠 관리 시스템(CMS)입니다. 워드프레스를 사용하면 비전문가도 쉽게 웹 사이트를 생성하고 콘텐츠를 게시하고 수정

# **Dockerfile 작성 시 유의사항 2 - 도커 이미지 크기가 커지지 않도록 유의**

- 도커 컨테이너 이미지를 빌드하고 배포하는 시간을 단축하기 위해서는 도커 이미지 크기를 최대한 작게 유지하는 것이 중요
- Dockerfile의 모든 명령어는 레이어를 생성하고, 생성된 레이어는 저장
- 실제 컨테이너에서 사용하지 않는 (못 하는) 레이어도 저장 공간을 차지하게 되므로, 불필요한 레이어가 생성되지 않도록 하는 것이 중요
- **Dockerfile을 작성할 때 명령어를 묶어서 실행하는 것이 유익**
- **빌더 패턴 또는 다단계 도커 빌드 등을 기법을 이용해서 이미지를 작게 만드는 것이 필요**

- # 모범사례

# **Dockerfile 모범 사례**

도커 이미지 빌드 시간 단축, 이미지 크기 감소, 보안 강화 및 유지 관리 가능성을 보장합니다.

## **#1 적절한 베이스 이미지 사용**

### **#1-1 도커 허브 공식 이미지를 사용**

도커 허브의 공식 이미지는 모범 사례를 따르고 문서화되어 있으며 보안 패치가 적용되어 있습니다.

비효율적인 Dockerfile

---

FROM ubuntu

RUN  apt-get update && apt-get install -y openjdk-8-jdk

효율적인 Dockerfile

---

FROM openjdk

### **#1-2 특정 버전의 태그 사용**

프로덕션 환경을 위한 도커 이미지를 빌드할 때 베이스 이미지에 latest 태그를 사용하면 하위 호환성을 제공하지 않을 경우 문제가 될 수 있습니다.

비효율적인 Dockerfile

---

FROM openjdk:latest

효율적인 Dockerfile

---

FROM openjdk:8

### **#1-3 최소 크기의 이미지를 사용**

최소 크기 버전의 부모(베이스) 이미지를 사용하여 최소 크기의 도커 이미지를 생성합니다. Alpine Linux 이미지를 중심으로 빌드된 최소 크기 이미지 또는 빌드 도구가 포함된 JDK 대신 JRE를 사용하여 어플리케이션을 실행해야 합니다.

비효율적인 Dockerfile

[dcc75fd4-958c-41c0-b927-e9e0e46b0756_Export-bf4d0a6a-62fe-4e91-9bda-61c4a552e142.zip](https://github.com/seojonghon/seojonghon/files/12802008/dcc75fd4-958c-41c0-b927-e9e0e46b0756_Export-bf4d0a6a-62fe-4e91-9bda-61c4a552e142.zip)
